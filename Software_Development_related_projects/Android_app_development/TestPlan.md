# Test Plan

**Author**: Team 044: Jeff Clem, Samantha Ho, Hannah Morilak, Yuan Yang

---
**This is the <span style="color: pink;">Version 3</span> of the Test Plan: modified during D4 Transition to add test results.**

What are added:
* Added test results for all the test cases in Section 2.
* Evaluated the adequacy of implemented test cases and added Structural Coverage Results in Section 2.

---
Previous versions:
* **Version 2: Please refer to commit ID we submitted for D3** - modified Version1 during D3 construction phase. What are modified in Version2:
  * Added Espresso as another testing technology: use JUnit5 with Espresso to design the test cases.
  * Added notes in Section 2 to describe where are the test cases implemented in project directory, and the methods to run the implemented tests.
  * Added extra test cases in Section 2 to test the functions we added when implementing.
* **Version 1: Please refer to commit ID we submitted for D2.**

---


## 1 Testing Strategy

### 1.1 Overall strategy

- Unit Testing 
  - The responsibility of the developer who is implementing the specific functionality
  - The developer will write white box testing suites with JUnit5 and Espresso to thoroughly test that their methods performs the correct behavior with all inputs from the input domain, both valid and invalid
  - Developer will be responsible for updating methods that failed tests in order to produce correct functionality
  - Testing Specialist will review individual testing suites after completion to advise on completeness of test suites 
- Integration Testing 
  - The responsibility of the developers who implemented the units that are interacting 
  - The developers will write white box testing suites with JUnit5 and Espresso to thoroughly test that their methods performs the correct behavior with all inputs from the input domain, both valid and invalid
  - Developer will be responsible for updating methods that failed tests in order to produce correct functionality
  - Testing Specialist will review integration testing suites after completion to advise on completeness of test suites 
- System Testing 
  - The responsibility of the Testing Specialist
  - Testing Specialist will produce black box testing suite to ensure that the system produces correct behavior for all inputs in the input domain, both valid and invalid 
  - This phase will also focus on testing
 the persistence of data as required by specifications in relation to SQLite
- Regression Testing 
  - Only performed on an as-needed basis, after functionality has been extended due to updated requirements in the future 
  - Developer who has written new functionality would be responsible for writing the test suite for that unit and updating implementation as needed 
  - Developers who wrote units that interact with the new unit will run integration testing as detailed above with newly created integration tests to test against the new unit
  - System testing will be run as detailed above, in addition to new system tests written to test new functionality within the context of the system
 


### 1.2 Test Selection

- Unit Testing
  - White box test suites that encompasses all possible input types within the input domain (examples within section 2)
  - Test suites written in JUnit5 and Espresso to assert that expected outputs are output from units
- Integration Testing
  - White box test suites that encompasses all possible input types within the input domain (examples within section 2)
  - Test suites written in JUnit5 and Espresso to assert that expected outputs are output from interacting units
- System Testing
  - Black box testing suite written in JUnit5 that tests that the overall functionality of the app is as expected, both with valid and invalid inputs in the input domain (examples within section 2)
- Regression Testing
  - White box testing suites will be written as detailed in Unit and Integration Testing for newly implemented functionality
  - Prior Unit/Integration Testing suites for original functionality will be rerun to ensure that original functionality has not been disrupted by adding new methods (find any coupling issues)
  - Black box testing suite from System Testing will be rerun to ensure overall system still maintains original functionality
  - New Black box testing suite will be written to test overall behavior of the system with the added functionality


### 1.3 Adequacy Criterion

Quality of testing will be assessed through global structural code coverage through Jacoco (with the command **./gradlew createDebugCoverageReport**) to assess whether test cases missed any scope(untested code) to determine if test suite is sufficient. This will be done at the Unit, Integration, and System (and eventually Regression) levels in phases of development to ensure that all code is tested thoroughly from the bottom-up. A baseline benchmark of 60% coverage will be considered adequate quality. Results of the global coverage report generated by the command will be embedded in section 2 of this document.



### 1.4 Bug Tracking

Bugs and enhancement requests will be tracked by the team via "Issues" functionality within GitHub, marking who was responsible for specific bugs within their implementation to request fixes. 

### 1.5 Technology

We will use JUnit5 and espresso to create all test suites and run the tests within Android Studio.

## 2 Test Cases

*Test cases listed here will be re-performed during Regression Testing to test that all individual/integrated units still behave as expected, with added emphasis on System Level tests to ensure that original functionality of the system has been preserved despite extended functionality. If functionality extended, new unit/integration tests will be written to test specific methods that have been newly implemented.*

---
Notes:
* **The test cases listed are implemented in test class files in app's androidTest/java/java/edu/gatech/seclass/jobcompare6300 folder.**
* The test cases that are not automated are tested manually.
* Tests Running Methods: 
  * The tests can be run on the command line by executing "./gradlew connectedAndroidTest" in the app directory.
  * The tests can be run from within Android Studio, by selecting "Run 'xxx test file'".

| Name                                                                            | Purpose                                                                                                                                   | Steps To Perform                                                                                                                                                                                                                                                                                                                                                                                            | Expected Result                                                                                                                                                                                                       | Actual Result                                                                                                  | Pass/Fail Info | Additional Info  |
|:--------------------------------------------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------|:---------------|:----------|
| Test Rankings                                                                   | Test that rankings are being properly calculated                                                                                          | Input pre-determined jobs, then open the sorting screen to ensure that the rankings are properly done                                                                                                                                                                                                                                                                                                       | Rankings should be in the correct order                                                                                                                                                                               | Rankings in expected order                                                                                     | Passed         | Very basic ranking check, Unit level test    |
| Test Weights (Salary)                                                           | Test that the weights are being used properly                                                                                             | Input pre-determined jobs, open the sorting screen to ensure that rankings are still properly done with weights                                                                                                                                                                                                                                                                                             | Rankings should be in the correct order                                                                                                                                                                               | Rankings in expected order                                                                                     | Passed         | There should be at least one job entry that will outshine others for each weight, Unit level test    |
| Test Weights (Bonus)                                                            | Test that the weights are being used properly                                                                                             | Input pre-determined jobs, open the sorting screen to ensure that rankings are still properly done with weights                                                                                                                                                                                                                                                                                             | Rankings should be in the correct order                                                                                                                                                                               | Rankings in expected order                                                                                     | Passed         | There should be at least one job entry that will outshine others for each weight, Unit level test    |
| Test Weights (Days off)                                                         | Test that the weights are being used properly                                                                                             | Input pre-determined jobs, open the sorting screen to ensure that rankings are still properly done with weights                                                                                                                                                                                                                                                                                             | Rankings should be in the correct order                                                                                                                                                                               | Rankings in expected order                                                                                     | Passed         | There should be at least one job entry that will outshine others for each weight, Unit level test    |
| Test Weights (Wellness Fund)                                                    | Test that the weights are being used properly                                                                                             | Input pre-determined jobs, open the sorting screen to ensure that rankings are still properly done with weights                                                                                                                                                                                                                                                                                             | Rankings should be in the correct order                                                                                                                                                                               | Rankings in expected order                                                                                     | Passed         | There should be at least one job entry that will outshine others for each weight, Unit level test    |
| Test Weights (Home buying fund)                                                 | Test that the weights are being used properly                                                                                             | Input pre-determined jobs, open the sorting screen to ensure that rankings are still properly done with weights                                                                                                                                                                                                                                                                                             | Rankings should be in the correct order                                                                                                                                                                               | Rankings in expected order                                                                                     | Passed         | There should be at least one job entry that will outshine others for each weight, Unit level test    |
| Test Weights (Shares)                                                           | Test that the weights are being used properly                                                                                             | Input pre-determined jobs, open the sorting screen to ensure that rankings are still properly done with weights                                                                                                                                                                                                                                                                                             | Rankings should be in the correct order                                                                                                                                                                               | Rankings in expected order                                                                                     | Passed         | There should be at least one job entry that will outshine others for each weight, Unit level test    |
| Test update scores properly                         | Test that when the weights are updated, that the scores in the database reflect those changes   | Input pre-determined set of jobs/offers. Change the weights from default. | New scores should reflect the updated weights and meet the pre-detemined values | All job scores updated correctly                                                                               | Passed         | Unit level test  |
| Test Invalid Input for Wellness Fund                                            | Ensure that users are not able to put an invalid wellness fund                                                                            | Try to input negative wellness fund; Try to input wellness fund over 5000 and save. Automated tests are in YuanCurrentJobTest.java and YuanJobOfferTest.java                                                                                                                                                                                                                                                | User shouldn't be able to enter a negative number and the negative sign should be eliminated in automated testing; If user inputs a wellness fun larger than 5000, an invalid value error should be popped.           | Negative sign eliminated; An error throw in the page                                                           | Passed         |   Unit level test  |
| Test Invalid input for Home Buying Program                                      | Ensure that users are not able to submit an invalid homebuying fund                                                                       | Try to input negative HBP value; Try to input HBP value greater than 15% of YearlySalary and save. Automated tests are in YuanCurrentJobTest.java and YuanJobOfferTest.java                                                                                                                                                                                                                                 | User shouldn't be able to enter a negative number and the negative sign should be eliminated in automated testing; If user inputs a HBF larger than yearlySalary, an invalid value error should be popped.            | Negative sign eliminated; An error throw in the page                                                           | Passed         |  Unit level test    |
| Test that numeric fields cannot have inputs other than digits and decimal point | Ensure that users cannot put characters other than digits and decimal point in the numeric field                                          | Try to input a string with some letters into one of the numeric fields (Salary, Bonus Weights, etc). Automated tests are in YuanCurrentJobTest.java and YuanJobOfferTest.java                                                                                                                                                                                                                               | User shouldn't be able to enter any character other than digits and decimal point; Invalid characters should be eliminated in automated testing.                                                                      | Characters other than digits and decimal points are eliminated                                                 | Passed         |  Unit level test    |
| Test that decimal numeric fields cannot have multiple decimal points            | Ensure that users cannot put multiple decimal points in the decimal numeric field                                                         | Try to input a number that has more than one decimal point (ie 100.25.6) and Save. Automated tests are in YuanCurrentJobTest.java and YuanJobOfferTest.java                                                                                                                                                                                                                                                 | Once a decimal point has been typed, user should not be able to enter another one in the field. For automated testing, input of "100.25.6" in a decimal numeric field should be automatically converted to "100.256". | A second decimal point is eliminated automatically, and details are saved                                      | Passed         |  Unit level test    |
| Test that decimal numeric fields cannot have one decimal point with no digits   | Ensure that users cannot put "." in the decimal numeric field                                                                             | Try to input "." for any numeric decimal field and save.                                                                                                                                                                                                                                                                                                                                                    | Should throw an invalid value error                                                                                                                                                                                   | An error message popped                                                                                        | Passed         |  Unit level test    |
| Test Edit Current Job Method                                                    | Tests that current job details are being saved by system and old details overwritten                                                      | Run method with 2 different sets of  inputs, then assert that current job parameters are equal to second set of entered parameters                                                                                                                                                                                                                                                                          | Parameters updated to new set, old set overwritten                                                                                                                                                                    | Current job in database is successfully updated with the same data as the newly inputs                         | Passed         |  Unit level test    |
| Test Enter Current Job Method Works                                             | Tests that current job details are being saved by system                                                                                  | Run method with set inputs, then assert that current job parameters are equal to entered parameters                                                                                                                                                                                                                                                                                                         | Parameters same as entered                                                                                                                                                                                            | Current job is saved to database with same data entered at frontend                                            | Passed         |    Unit level test    |
| Test Enter Job Offer Method Works                                               | Tests that job offer details are being saved by system                                                                                    | Run method with set inputs, then assert that job offer parameters are equal to entered parameters                                                                                                                                                                                                                                                                                                           | Parameters same as entered                                                                                                                                                                                            | A new job offer is saved to database with same data entered at frontend                                        | Passed         |    Unit level test    |
| Test that duplicated jobs are not allowed                                       | Test that users are not able to enter multiple  jobs that have the same combination of title and company                                  | Case (1): Enter a offer and save. Enter another job offer with the same title and company as the last one; Case (2): Enter a current job and save. Enter a job offer with the same title and company as the just entered current job; Case (3): Enter a current job and save. Enter a valid job offer and save. Edit the just saved current job with the same title and company as the just saved job offer | Error message will pop up and user will not be able to save or update                                                                                                                                                 | Error message popped up for all three test cases                                                               | Passed         |    Unit level test    |
| Test Adjust Comparison Weights Method                                           | Ensure comparison weights are being updated and persists                                                                                  | Enter 2 sets of comparison weights, then check if weights are equal to second set                                                                                                                                                                                                                                                                                                                           | Parameters updated to new set, old set overwritten                                                                                                                                                                    | Values are reamin what they were set to after restart                                                          | Passed         | Unit level test     |
| Test Invalid Input for Comparison Method                                        | Less than 2 Jobs available for comparison, shouldn’t work                                                                                 | Run method on empty job/one job list, run method on job list of only current job                                                                                                                                                                                                                                                                                                                            | Should not change when users try to enter compare page | Users are not able to click into the comparison page prior to meeting the requirements                         | Passed  |   Unit level test  |
| Test no empty inputs                                                            | Testing that users cannot save a job when empty input fields are present                                                                  | Open enter job offer or enter current job page and try to immediately save without putting any information in.                                                                                                                                                                                                                                                                                              | GUI Error - "Error: empty inputs"                                                                                                                                                                                     | An error message popped                                                                                        | Passed         | Unit Level Test   |
| Test GUI                                                                        | Ensure that GUI is properly set up with correct IDs and links                                                                             | Open the app, check the id’s on main page, ensuring that all that should be there, are there, step into each page using the correct button and check ID’s                                                                                                                                                                                                                                                   | GUI Should be properly set up with correct IDs                                                                                                                                                                        | All GUI Elements pass `isDisplayed()` where appropriate and fail `isEnabled()` otherwise                       | Passed         |  System Level Test  |
| Test enable compare jobs                                                        | Ensure that GUI does not have the compare job button enabled unless two or more jobs are inputted                                         | Open the app and make sure that button is diabled, add a current job, check that button is still disabled, add a new job and button should be enabled  | Compare job button should be enabled/disabled properly  | Compare offers button passes `isEnabled()` when appropriate and fails `isEnabled()` otherwise                  | Passed         |  System Level Test  |
| Test enable compare with current job                                            | Ensure that GUI does not have the compare with current job if no current job exists                                                       | Open the app, go to new offer page and ensure that button is disabled. Enter current job information and head back to the new offer page. The button should now be enabled | The compare with current job button should be enabled/disabled properly | Compare offer with Current job button passes `isEnabled()` when appropriate and fails `isEnabled()` otherwise. | Passed         |  System Level Test  |
| Test DisplayOffers Functionality | Testing that the number of displayed jobs within Compare method matches number of offers entered in EditCurrentJob and EnterOffer methods | Enter specified number of jobs in Enter/Edit CurrentJob Methods and EnterOffer methods, then call CompareJobs method and return the number displayed | The two numbers of jobs should be equal | The amount of child elements (rows) in the ranked table matches the amount of jobs inputted (4)                | Passed         | Integration Level Test   |
| Test that database wont accept null fields                                      | Testing that the job table and comparison table will not accept null values                                                               | Directly call the database and try to input new job offer with at least one null field                                                                                                                                                                                                                                                                                                                      | Test that the amount of entries did not change                                                                                                                                                                        | Database throws the expected exception when null values attempt to be inserted                                 | Passed         | Integration Level Test   |
| Test that database persists                                                     | Testing the between runs the database state is exactly as it was when the app was closed                                                  | Reset database, add job, close and reopen the app. The database should remain the same                                                                                                                                                                                                                                                                                                                      | Database prior to close and reopen should be the same as after.                                                                                                                                                       | Database persists between runs                                                                                 | Passed         | Integration Level Test   |

### 2.2 Global Structural Coverage Results

![GlobalCoverageReport](../images/GlobalCoverageReport.png)

### 2.3 Structural Coverage Results By Class 

![ClassCoverageReport](../images/CoverageReportByClass.png)







